var EnemyShips={};EnemyShips.allDeadTimer=0;EnemyShips.maxShipsPerWave=16;EnemyShips.minShipsPerWave=4;EnemyShips.shipHealth=2;EnemyShips.maxWaves=3;EnemyShips.waveBulletFrequency=3e3;EnemyShips.lastWave=6e3;EnemyShips.waveFrequency=1e4;EnemyShips.wavePatterns=[{xCoords:[.9,.9,.1,.1,.9,.9,.1,.1,.9,.9,.1,.1,.9,.9,.1,.1,.9,.9],yCoords:[-.2,.1,.1,.2,.2,.3,.3,.4,.5,.6,.6,.7,.7,.8,.8,.9,.9,1.1]},{xCoords:[-.2,.1,.3,.5,.7,.9,.7,.5,.3,.1,-.2],yCoords:[.45,.45,.2,.1,.2,.5,.7,.9,.7,.55,.55]},{xCoords:[-.2,.8,.9],yCoords:[.2,.1,1.3]},{xCoords:[.9,.2,.1],yCoords:[-.2,.5,1.3]},{xCoords:[.5,.5,.1,.9,.2,.9,.2],yCoords:[-.2,.1,.3,.5,.7,.9,1.1]},{xCoords:[-.2,.15,.2,.7,.8,.75,.8,.75,.9],yCoords:[.9,.85,.1,.1,.3,.5,.7,.9,1.1]},{xCoords:[.9,.9,.9,.5,0],yCoords:[1.1,.9,.1,.1,1.2]}];EnemyShips.patternCounter=Math.floor(Math.random()*EnemyShips.wavePatterns.length);EnemyShips.waves=[];EnemyShips.wave=function(){for(this.shipFrequency=1e3+Math.random()*1e3,this.lastShipSpawned=0;typeof this.wavePattern=="undefined";)EnemyShips.wavePatterns[EnemyShips.patternCounter].inUse?(EnemyShips.patternCounter++,EnemyShips.patternCounter>=EnemyShips.wavePatterns.length&&(EnemyShips.patternCounter=0)):(this.wavePattern=EnemyShips.wavePatterns[EnemyShips.patternCounter],this.wavePattern.inUse=!0);this.shipsInWave=EnemyShips.minShipsPerWave+Math.round(Math.random()*(EnemyShips.maxShipsPerWave-EnemyShips.minShipsPerWave));this.shipsDestroyed=0;var n=Math.round(32+Math.random()*32);this.colors=Ships.enemyColors[Math.floor(Math.random()*Ships.enemyColors.length)];this.shipHealth=EnemyShips.shipHealth;this.lastBullet=0;this.texture=PIXI.Texture.fromCanvas(Ships.shipArt(n,Date.now(),!0,this.colors));this.maxSpeed=90+Math.random()*20;this.offset=Math.round(n/2);this.ships=[];this.shipsExited=0;this.shipContainer=new PIXI.Container;enemyShipContainer.addChild(this.shipContainer)};EnemyShips.enemyShip=function(n){this.wave=n;this.xLoc=canvasWidth*n.wavePattern.xCoords[0];this.xTar=canvasWidth*n.wavePattern.xCoords[1];this.yLoc=canvasHeight*n.wavePattern.yCoords[0];this.yTar=canvasHeight*n.wavePattern.yCoords[1];this.nextCoord=1;this.maxSpeed=n.maxSpeed;this.health=n.shipHealth;this.inPlay=1;this.enemyShip=!0;this.rotation=0;this.offset=n.offset;this.lastTrail=0;this.sprite=new PIXI.Sprite(n.texture);this.sprite.position.x=this.xLoc;this.sprite.position.y=this.yLoc;this.sprite.anchor={x:.5,y:.5};n.shipContainer.addChild(this.sprite)};EnemyShips.destroy=function(n){if(n.sprite.visible=!1,n.inPlay=0,n.wave.shipsDestroyed++,n.wave.shipsDestroyed>=n.wave.shipsInWave&&(n.wave.shipContainer.visible=!1,addCredits(n.wave.shipHealth*n.wave.shipsInWave*.5),GameText.credits.newCreditText(canvasWidth/2,canvasHeight/3,"Wave destroyed\nBonus Credits: "+formatMoney(n.wave.shipHealth*n.wave.shipsInWave*.5))),enemiesKilled++,Ships.generateExplosion(n),addCredits(n.wave.shipHealth),GameText.credits.newCreditText(n.xLoc,n.yLoc-15,"+"+formatMoney(n.wave.shipHealth)),enemiesKilled>=enemiesToKill){EnemyShips.allDeadTimer=0;for(var t=0;t<EnemyShips.waves.length;t++)EnemyShips.waves[t].shipContainer.visible=!1}Powerups.newPowerup(n.xLoc,n.yLoc)};EnemyShips.checkForPlayerCollision=function(n){Ships.detectShipCollision(n,PlayerShip.playerShip)&&(PlayerShip.damagePlayerShip(PlayerShip.playerShip,n.health),EnemyShips.destroy(n))};EnemyShips.checkForBulletCollisions=function(n){for(var t=0;t<Bullets.playerBullets.maxPlayerBullets;t++)Bullets.playerBullets.inPlay[t]===1&&Ships.detectCollision(n,Bullets.playerBullets.xLoc[t],Bullets.playerBullets.yLoc[t])&&(Bullets.playerBullets.inPlay[t]=0,Bullets.playerBullets.sprite[t].visible=!1,Bullets.generateExplosion(Bullets.playerBullets.xLoc[t],Bullets.playerBullets.yLoc[t]),n.health-=Bullets.playerBullets.strength,n.health<=0&&EnemyShips.destroy(n))};EnemyShips.updateShip=function(n,t){if(n.inPlay){if(enemiesKilled>=enemiesToKill&&(n.inPlay=0,n.xLoc>0&&n.yLoc>0&&Ships.generateExplosion(n)),Math.sqrt(Math.pow(n.xLoc-n.xTar,2)+Math.pow(n.yLoc-n.yTar,2))>5){var i=n.xTar-n.xLoc,r=n.yTar-n.yLoc;Ships.updateShipSpeed(n,i,r,t);Ships.updateRotation(n,t);n.sprite.position.x=n.xLoc;n.sprite.position.y=n.yLoc;n.sprite.rotation=-n.rotation}else n.nextCoord++,n.nextCoord>=n.wave.wavePattern.xCoords.length?(n.inPlay=0,n.sprite.visible=!1,n.wave.shipsExited++):(n.xTar=canvasWidth*n.wave.wavePattern.xCoords[n.nextCoord],n.yTar=canvasHeight*n.wave.wavePattern.yCoords[n.nextCoord]);EnemyShips.checkForBulletCollisions(n);EnemyShips.checkForPlayerCollision(n);Stars.shipTrails.updateShip(n,t);n.sprite.tint=tintOn?calculateTint(n.health/n.wave.shipHealth):16777215;n.inPlay&&n.wave.lastBullet>=EnemyShips.waveBulletFrequency&&Math.random()>.9&&(Bullets.enemyBullets.newEnemyBullet(n),n.wave.lastBullet=0)}};EnemyShips.update=function(n){var t,i;for(EnemyShips.lastWave+=n*1e3,enemiesKilled>=enemiesToKill&&(EnemyShips.allDeadTimer+=n*1e3,EnemyShips.allDeadTimer>PlayerShip.allDeadTime&&changeState(states.levelComplete)),t=0;t<EnemyShips.maxWaves;t++)if(!EnemyShips.waves[t]||EnemyShips.waves[t].finished)EnemyShips.lastWave>=EnemyShips.waveFrequency&&Math.random()>.9&&(EnemyShips.waves[t]=new EnemyShips.wave,EnemyShips.lastWave=0);else{for(EnemyShips.waves[t].lastShipSpawned+=n*1e3,EnemyShips.waves[t].lastBullet+=n*1e3,i=0;i<EnemyShips.waves[t].shipsInWave;i++)EnemyShips.waves[t].ships[i]?EnemyShips.updateShip(EnemyShips.waves[t].ships[i],n):EnemyShips.waves[t].lastShipSpawned>=EnemyShips.waves[t].shipFrequency&&(EnemyShips.waves[t].ships[i]=new EnemyShips.enemyShip(EnemyShips.waves[t]),EnemyShips.waves[t].lastShipSpawned=0);EnemyShips.waves[t].shipsExited+EnemyShips.waves[t].shipsDestroyed>=EnemyShips.waves[t].shipsInWave&&(EnemyShips.waves[t].finished=!0,EnemyShips.waves[t].wavePattern.inUse=!1,EnemyShips.waves[t].shipContainer.visible=!1)}};
//# sourceMappingURL=enemyships.min.js.map
