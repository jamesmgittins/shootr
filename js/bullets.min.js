var Bullets={};Bullets.blasts={texture:function(){var t=document.createElement("canvas"),i,n;return t.width=32,t.height=32,i=t.getContext("2d"),n=i.createRadialGradient(16,16,0,16,16,16),n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(.8,"rgba(255,255,128,0.2)"),n.addColorStop(1,"rgba(255,180,0,0)"),i.fillStyle=n,i.fillRect(0,0,32,32),PIXI.Texture.fromCanvas(t)}(),maxBlasts:20,currentBlast:0,sprite:[],newBlast:function(n,t){Bullets.blasts.currentBlast>=Bullets.blasts.maxBlasts&&(Bullets.blasts.currentBlast=0);Bullets.blasts.sprite[Bullets.blasts.currentBlast].visible=!0;Bullets.blasts.sprite[Bullets.blasts.currentBlast].scale={x:1,y:1};Bullets.blasts.sprite[Bullets.blasts.currentBlast].position.x=n;Bullets.blasts.sprite[Bullets.blasts.currentBlast].position.y=t;Bullets.blasts.currentBlast++},initialize:function(){Bullets.blasts.sprites=new PIXI.Container;for(var n=0;n<Bullets.blasts.maxBlasts;n++)Bullets.blasts.sprite[n]=new PIXI.Sprite(Bullets.blasts.texture),Bullets.blasts.sprite[n].visible=!1,Bullets.blasts.sprite[n].anchor={x:.5,y:.5},Bullets.blasts.sprites.addChild(Bullets.blasts.sprite[n]);explosionContainer.addChild(Bullets.blasts.sprites)},updateBlasts:function(n){for(var t=0;t<Bullets.blasts.maxBlasts;t++)Bullets.blasts.sprite[t].visible&&(Bullets.blasts.sprite[t].scale.y-=5*n,Bullets.blasts.sprite[t].scale.x=Bullets.blasts.sprite[t].scale.y,Bullets.blasts.sprite[t].scale.x<=0&&(Bullets.blasts.sprite[t].visible=!1))}};Bullets.enemyBullets={texture:function(){var t=document.createElement("canvas"),i,n;return t.width=8,t.height=8,i=t.getContext("2d"),n=i.createRadialGradient(4,4,0,4,4,4),n.addColorStop(0,"rgba(255,255,128,1)"),n.addColorStop(.8,"rgba(255,0,0,0.4)"),n.addColorStop(1,"rgba(255,180,0,0)"),i.fillStyle=n,i.fillRect(0,0,8,8),PIXI.Texture.fromCanvas(t)}(),maxEnemyBullets:20,currentEnemyBullet:0,enemyShotSpeed:100,enemyShotStrength:1,xLoc:[],yLoc:[],ySpeed:[],xSpeed:[],inPlay:[],sprite:[],resetAll:function(){for(var n=0;n<Bullets.enemyBullets.maxEnemyBullets;n++)Bullets.enemyBullets.inPlay[n]=0,Bullets.enemyBullets.sprite[n].visible=!1},newEnemyBullet:function(n){Bullets.enemyBullets.currentEnemyBullet>=Bullets.enemyBullets.maxEnemyBullets&&(Bullets.enemyBullets.currentEnemyBullet=0);Bullets.enemyBullets.xLoc[Bullets.enemyBullets.currentEnemyBullet]=n.xLoc;Bullets.enemyBullets.yLoc[Bullets.enemyBullets.currentEnemyBullet]=n.yLoc+16;var t=PlayerShip.playerShip.xLoc-n.xLoc,i=n.yLoc-PlayerShip.playerShip.yLoc,r=Math.sqrt(Math.pow(t,2)+Math.pow(i,2));Bullets.enemyBullets.xSpeed[Bullets.enemyBullets.currentEnemyBullet]=t/r*Bullets.enemyBullets.enemyShotSpeed;Bullets.enemyBullets.ySpeed[Bullets.enemyBullets.currentEnemyBullet]=i/r*Bullets.enemyBullets.enemyShotSpeed;Bullets.enemyBullets.inPlay[Bullets.enemyBullets.currentEnemyBullet]=1;Bullets.enemyBullets.sprite[Bullets.enemyBullets.currentEnemyBullet].visible=!0;Bullets.enemyBullets.sprite[Bullets.enemyBullets.currentEnemyBullet].position.x=n.xLoc;Bullets.enemyBullets.sprite[Bullets.enemyBullets.currentEnemyBullet].position.y=n.yLoc-16;Bullets.enemyBullets.currentEnemyBullet++},initialize:function(){Bullets.enemyBullets.sprites=new PIXI.Container;for(var n=0;n<Bullets.enemyBullets.maxEnemyBullets;n++)Bullets.enemyBullets.sprite[n]=new PIXI.Sprite(Bullets.enemyBullets.texture),Bullets.enemyBullets.sprite[n].visible=!1,Bullets.enemyBullets.sprite[n].anchor={x:.5,y:.5},Bullets.enemyBullets.sprites.addChild(Bullets.enemyBullets.sprite[n]);bulletContainer.addChild(Bullets.enemyBullets.sprites)}};Bullets.playerBullets={texture:function(){var t=document.createElement("canvas"),i,n;return t.width=8,t.height=8,i=t.getContext("2d"),n=i.createRadialGradient(4,4,0,4,4,4),n.addColorStop(0,"rgba(255,255,0,1)"),n.addColorStop(.8,"rgba(255,255,255,0.5)"),n.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=n,i.fillRect(0,0,8,8),PIXI.Texture.fromCanvas(t)}(),maxPlayerBullets:100,shotFrequency:1e3,lastPlayerShot:0,shotSpeed:150,strength:1,xLoc:[],yLoc:[],ySpeed:[],xSpeed:[],inPlay:[],sprite:[],resetAll:function(){for(var n=0;n<Bullets.playerBullets.maxPlayerBullets;n++)Bullets.playerBullets.inPlay[n]=0,Bullets.playerBullets.sprite[n].visible=!1},resetPlayerBullet:function(n){Bullets.playerBullets.xLoc[n]=PlayerShip.playerShip.xLoc;Bullets.playerBullets.yLoc[n]=PlayerShip.playerShip.yLoc-16;Bullets.playerBullets.ySpeed[n]=Bullets.playerBullets.shotSpeed;Bullets.playerBullets.xSpeed[n]=0;Bullets.playerBullets.inPlay[n]=1;Bullets.playerBullets.sprite[n].visible=!0;Bullets.playerBullets.sprite[n].position.x=PlayerShip.playerShip.xLoc;Bullets.playerBullets.sprite[n].position.y=PlayerShip.playerShip.yLoc-16},initialize:function(){Bullets.playerBullets.sprites=new PIXI.Container;for(var n=0;n<Bullets.playerBullets.maxPlayerBullets;n++)Bullets.playerBullets.sprite[n]=new PIXI.Sprite(Bullets.playerBullets.texture),Bullets.playerBullets.sprite[n].visible=!1,Bullets.playerBullets.sprite[n].anchor={x:.5,y:.5},Bullets.playerBullets.sprites.addChild(Bullets.playerBullets.sprite[n]);bulletContainer.addChild(Bullets.playerBullets.sprites)}};Bullets.explosionBits={bitsPerExplosion:16,maxExplosionBits:64,currentExplosionBit:0,sprite:[],xSpeed:[],ySpeed:[],update:function(n){for(var t=0;t<Bullets.explosionBits.maxExplosionBits;t++)Bullets.explosionBits.sprite[t].visible&&(Bullets.explosionBits.sprite[t].alpha-=.5*n,Bullets.explosionBits.sprite[t].alpha<=0?Bullets.explosionBits.sprite[t].visible=!1:(Bullets.explosionBits.sprite[t].position.x+=Bullets.explosionBits.xSpeed[t]*n,Bullets.explosionBits.sprite[t].position.y+=Bullets.explosionBits.ySpeed[t]*n))},initialize:function(){Bullets.explosionBits.sprites=new PIXI.Container;for(var n=0;n<Bullets.explosionBits.maxExplosionBits;n++)Bullets.explosionBits.sprite[n]=new PIXI.Sprite(Stars.stars.texture),Bullets.explosionBits.sprite[n].visible=!1,Bullets.explosionBits.sprites.addChild(Bullets.explosionBits.sprite[n]);starContainer.addChild(Bullets.explosionBits.sprites)},newExplosionBit:function(n,t){Bullets.explosionBits.currentExplosionBit>=Bullets.explosionBits.maxExplosionBits&&(Bullets.explosionBits.currentExplosionBit=0);Bullets.explosionBits.sprite[Bullets.explosionBits.currentExplosionBit].visible=!0;Bullets.explosionBits.sprite[Bullets.explosionBits.currentExplosionBit].alpha=1;Bullets.explosionBits.sprite[Bullets.explosionBits.currentExplosionBit].position.x=n;Bullets.explosionBits.sprite[Bullets.explosionBits.currentExplosionBit].position.y=t;Bullets.explosionBits.sprite[Bullets.explosionBits.currentExplosionBit].scale.x=Bullets.explosionBits.sprite[Bullets.explosionBits.currentExplosionBit].scale.y=1+Math.random();Bullets.explosionBits.xSpeed[Bullets.explosionBits.currentExplosionBit]=-100+Math.random()*200;Bullets.explosionBits.ySpeed[Bullets.explosionBits.currentExplosionBit]=-100+Math.random()*200;Bullets.explosionBits.currentExplosionBit++}};Bullets.generateExplosion=function(n,t){for(var i=0;i<Bullets.explosionBits.bitsPerExplosion;i++)Bullets.explosionBits.newExplosionBit(n,t);Bullets.blasts.newBlast(n,t)};Bullets.updatePlayerBullets=function(n){var r,t,u,i;for(Bullets.playerBullets.lastPlayerShot+=n*1e3,r=Bullets.playerBullets.lastPlayerShot>=Bullets.playerBullets.shotFrequency&&EnemyShips.allDeadTimer==0?PlayerShip.playerShip.crossShot==1?4:PlayerShip.playerShip.spreadShot==1?3:1:0,t=0;t<Bullets.playerBullets.maxPlayerBullets;t++)if(Bullets.playerBullets.inPlay[t]!==1&&PlayerShip.playerShip.inPlay){if(r>0){if(Bullets.playerBullets.resetPlayerBullet(t),playerOneAxes[2]>.25||playerOneAxes[2]<-.25||playerOneAxes[3]>.25||playerOneAxes[3]<-.25)u=Math.sqrt(Math.pow(playerOneAxes[2],2)+Math.pow(playerOneAxes[3],2)),Bullets.playerBullets.xSpeed[t]=playerOneAxes[2]/u*Bullets.playerBullets.shotSpeed,Bullets.playerBullets.ySpeed[t]=-1*playerOneAxes[3]/u*Bullets.playerBullets.shotSpeed;else if(aimLocX&&aimLocY){var f=aimLocX-Bullets.playerBullets.xLoc[t],e=Bullets.playerBullets.yLoc[t]-aimLocY,u=Math.sqrt(Math.pow(f,2)+Math.pow(e,2));Bullets.playerBullets.xSpeed[t]=f/u*Bullets.playerBullets.shotSpeed;Bullets.playerBullets.ySpeed[t]=e/u*Bullets.playerBullets.shotSpeed}r==4&&(i=RotateVector2d(Bullets.playerBullets.xSpeed[t],Bullets.playerBullets.ySpeed[t],Math.PI),Bullets.playerBullets.xSpeed[t]=i.x,Bullets.playerBullets.ySpeed[t]=i.y);r==3&&(i=PlayerShip.playerShip.spreadShot?RotateVector2d(Bullets.playerBullets.xSpeed[t],Bullets.playerBullets.ySpeed[t],-.12):RotateVector2d(Bullets.playerBullets.xSpeed[t],Bullets.playerBullets.ySpeed[t],-Math.PI/2),Bullets.playerBullets.xSpeed[t]=i.x,Bullets.playerBullets.ySpeed[t]=i.y);r==2&&(i=PlayerShip.playerShip.spreadShot?RotateVector2d(Bullets.playerBullets.xSpeed[t],Bullets.playerBullets.ySpeed[t],.12):RotateVector2d(Bullets.playerBullets.xSpeed[t],Bullets.playerBullets.ySpeed[t],Math.PI/2),Bullets.playerBullets.xSpeed[t]=i.x,Bullets.playerBullets.ySpeed[t]=i.y);Bullets.playerBullets.lastPlayerShot=0;r--}}else Bullets.playerBullets.xLoc[t]+=Bullets.playerBullets.xSpeed[t]*n,Bullets.playerBullets.yLoc[t]-=Bullets.playerBullets.ySpeed[t]*n,Bullets.playerBullets.sprite[t].position.x=Bullets.playerBullets.xLoc[t],Bullets.playerBullets.sprite[t].position.y=Bullets.playerBullets.yLoc[t],(Bullets.playerBullets.yLoc[t]<0||Bullets.playerBullets.yLoc[t]>canvasHeight||Bullets.playerBullets.xLoc[t]<0||Bullets.playerBullets.xLoc[t]>canvasWidth)&&(Bullets.playerBullets.inPlay[t]=0,Bullets.playerBullets.sprite[t].visible=!1)};Bullets.updateEnemyBullets=function(n){for(var t=0;t<Bullets.enemyBullets.maxEnemyBullets;t++)Bullets.enemyBullets.inPlay[t]===1&&(enemiesKilled>=enemiesToKill?(Bullets.enemyBullets.inPlay[t]=0,Bullets.generateExplosion(Bullets.enemyBullets.xLoc[t],Bullets.enemyBullets.yLoc[t]),Bullets.enemyBullets.sprite[t].visible=!1):(Bullets.enemyBullets.xLoc[t]+=Bullets.enemyBullets.xSpeed[t]*n,Bullets.enemyBullets.yLoc[t]-=Bullets.enemyBullets.ySpeed[t]*n,Bullets.enemyBullets.yLoc[t]<0||Bullets.enemyBullets.yLoc[t]>canvasHeight||Bullets.enemyBullets.xLoc[t]<0||Bullets.enemyBullets.xLoc[t]>canvasWidth?(Bullets.enemyBullets.inPlay[t]=0,Bullets.enemyBullets.sprite[t].visible=!1):Ships.detectCollision(PlayerShip.playerShip,Bullets.enemyBullets.xLoc[t],Bullets.enemyBullets.yLoc[t])?(Bullets.enemyBullets.inPlay[t]=0,Bullets.enemyBullets.sprite[t].visible=!1,Bullets.generateExplosion(Bullets.enemyBullets.xLoc[t],Bullets.enemyBullets.yLoc[t]),PlayerShip.damagePlayerShip(PlayerShip.playerShip,Bullets.enemyBullets.enemyShotStrength)):(Bullets.enemyBullets.sprite[t].position.x=Bullets.enemyBullets.xLoc[t],Bullets.enemyBullets.sprite[t].position.y=Bullets.enemyBullets.yLoc[t])))};
//# sourceMappingURL=bullets.min.js.map
