var PlayerShip={},i;for(PlayerShip.allPlayersDead=0,PlayerShip.allDeadTimer=0,PlayerShip.allDeadTime=3e3,PlayerShip.colorsRgb=[],i=0;i<Ships.playerColors[0].length;i++)PlayerShip.colorsRgb[i]=hexToRgb(Ships.playerColors[0][i]);PlayerShip.shipFragments=Ships.shipFragments(PlayerShip.colorsRgb);PlayerShip.SHIP_SIZE=64;PlayerShip.playerShip={seed:1,xLoc:320,yLoc:480,maxSpeed:100,offset:PlayerShip.SHIP_SIZE/2,rotation:0,SHIP_TRAIL_COUNT:Ships.shipTrailCount,maxShield:10,currShield:10,shieldRegen:2,shieldDelay:5e3,lastDmg:0,inPlay:1};PlayerShip.newShip=function(){PlayerShip.playerShip.seed=Date.now();PlayerShip.playerShip.art=Ships.shipArt(PlayerShip.SHIP_SIZE,PlayerShip.playerShip.seed,!1,Ships.playerColors[Math.floor(Math.random()*Ships.playerColors.length)]);PlayerShip.playerShip.shipTrail=new Stars.shipTrail(PlayerShip.playerShip)};PlayerShip.updatePlayerShip=function(n){var t,i,r,u;if(PlayerShip.allPlayersDead===1){PlayerShip.allDeadTimer+=n*1e3;PlayerShip.allDeadTimer>PlayerShip.allDeadTime&&changeState(states.levelFailed);return}playerOneAxes[0]>.25||playerOneAxes[0]<-.25||playerOneAxes[1]>.25||playerOneAxes[1]<-.25?(Ships.updateShipSpeedFromController(PlayerShip.playerShip,playerOneAxes[0],playerOneAxes[1],n),clickLocX=0,clickLocY=0):w||a||s||d?(t=0,i=0,w&&i--,a&&t--,s&&i++,d&&t++,Ships.updateShipSpeed(PlayerShip.playerShip,t,i,n),clickLocX=0,clickLocY=0):clickLocX&&clickLocY&&Math.sqrt(Math.pow(PlayerShip.playerShip.xLoc-clickLocX,2)+Math.pow(PlayerShip.playerShip.yLoc-clickLocY,2))>5?(t=clickLocX-PlayerShip.playerShip.xLoc,i=clickLocY-PlayerShip.playerShip.yLoc,Ships.updateShipSpeed(PlayerShip.playerShip,t,i,n)):(clickLocX=0,clickLocY=0,PlayerShip.playerShip.xSpeed=0,PlayerShip.playerShip.ySpeed=0);r=PlayerShip.playerShip.xSpeed/500;u=n;Ships.updateRotation(PlayerShip.playerShip,n);PlayerShip.playerShip.lastDmg+=n*1e3;PlayerShip.playerShip.lastDmg>=PlayerShip.playerShip.shieldDelay&&PlayerShip.playerShip.currShield<PlayerShip.playerShip.maxShield&&(PlayerShip.playerShip.currShield+=PlayerShip.playerShip.shieldRegen*n,PlayerShip.playerShip.currShield>PlayerShip.playerShip.maxShield&&(PlayerShip.playerShip.currShield=PlayerShip.playerShip.maxShield));PlayerShip.playerShip.sprite.position.x=PlayerShip.playerShip.xLoc;PlayerShip.playerShip.sprite.position.y=PlayerShip.playerShip.yLoc;PlayerShip.playerShip.sprite.rotation=PlayerShip.playerShip.rotation};PlayerShip.damagePlayerShip=function(n,t){n.currShield-=t;n.lastDmg=0;n.currShield<=0&&n.inPlay===1&&(n.sprite.visible=!1,n.inPlay=0,PlayerShip.allPlayersDead=1,PlayerShip.allDeadTimer=0,PlayerShip.generateExplosion(n))};PlayerShip.drawPlayerShip=function(n){PlayerShip.playerShip.inPlay===1&&(n.save(),n.translate(PlayerShip.playerShip.xLoc,PlayerShip.playerShip.yLoc),n.rotate(PlayerShip.playerShip.rotation),n.drawImage(PlayerShip.playerShip.art,-PlayerShip.playerShip.offset,-PlayerShip.playerShip.offset),n.restore())};PlayerShip.drawPlayerShipLine=function(n){PlayerShip.playerShip.inPlay===1&&(clickLocX&&clickLocY&&(n.strokeStyle="#333",n.beginPath(),n.moveTo(PlayerShip.playerShip.xLoc,PlayerShip.playerShip.yLoc),n.lineTo(clickLocX,clickLocY),n.stroke(),n.strokeStyle="#0B0",n.beginPath(),n.moveTo(clickLocX-4,clickLocY-4),n.lineTo(clickLocX+5,clickLocY+5),n.stroke(),n.beginPath(),n.moveTo(clickLocX+4,clickLocY-4),n.lineTo(clickLocX-5,clickLocY+5),n.stroke()),(playerOneAxes[2]>.25||playerOneAxes[2]<-.25||playerOneAxes[3]>.25||playerOneAxes[3]<-.25)&&(n.strokeStyle="#333",n.beginPath(),n.moveTo(PlayerShip.playerShip.xLoc,PlayerShip.playerShip.yLoc-16),n.lineTo(PlayerShip.playerShip.xLoc+playerOneAxes[2]*100,PlayerShip.playerShip.yLoc-16+playerOneAxes[3]*100),n.stroke()))};var lastPlayerShield=0,destroyedWarning=!1,shieldRed=0,shieldBlue=255;PlayerShip.drawShield=function(n){var t=PlayerShip.playerShip.currShield/PlayerShip.playerShip.maxShield*100;lastPlayerShield!=t&&(shieldRed=Math.floor((100-t)*2.55),shieldBlue=Math.floor(t*2.55),n.fillStyle="rgb("+shieldRed+",0,"+shieldBlue+")",n.clearRect(0,0,100,25),n.fillRect(0,0,Math.round(t),25),lastPlayerShield=t,setTimeout(function(){t<=0&&!destroyedWarning&&(destroyedWarning=!0,$("#p1-shield-div").addClass("destroyed"))}))};PlayerShip.initialize=function(){PlayerShip.playerShip.art=Ships.shipArt(PlayerShip.SHIP_SIZE,PlayerShip.playerShip.seed,!1,Ships.playerColors[Math.floor(Math.random()*Ships.playerColors.length)]);PlayerShip.playerShip.xLoc=canvasWidth/2;PlayerShip.playerShip.yLoc=canvasHeight-canvasHeight/6;PlayerShip.playerShip.shipTrail=new Stars.shipTrail(PlayerShip.playerShip);PlayerShip.playerShip.sprite=new PIXI.Sprite(PIXI.Texture.fromCanvas(PlayerShip.playerShip.art));PlayerShip.playerShip.sprite.anchor={x:.5,y:.5};PlayerShip.playerShip.sprite.position.x=PlayerShip.playerShip.xLoc;PlayerShip.playerShip.sprite.position.y=PlayerShip.playerShip.yLoc;stage.addChild(PlayerShip.playerShip.sprite)};PlayerShip.generateExplosion=function(n){for(var i,t=0;t<EnemyShips.explosionBits.bitsPerExplosion;t++)EnemyShips.explosionBits.newExplosionBit(n,PlayerShip.colorsRgb);for(i=15,t=0;t<i;t++)EnemyShips.currentExplosionFragment>=EnemyShips.maxExplosionFragments&&(EnemyShips.currentExplosionFragment=0),EnemyShips.fragments[EnemyShips.currentExplosionFragment]={opacity:1,xLoc:n.xLoc-5+Math.random()*10,yLoc:n.yLoc-5+Math.random()*10,bitmap:PlayerShip.shipFragments[Math.floor(Math.random()*PlayerShip.shipFragments.length)],xSpeed:n.xSpeed/2-50+Math.random()*100,ySpeed:n.ySpeed/2-50+Math.random()*100,rotation:Math.random()*3.14,rotationSpeed:-1+Math.random()*2},EnemyShips.fragments[EnemyShips.currentExplosionFragment].width=EnemyShips.fragments[EnemyShips.currentExplosionFragment].bitmap.width,EnemyShips.currentExplosionFragment++;Ships.currentBlast>Ships.maxBlasts&&(Ships.currentBlast=0);Ships.blasts[Ships.currentBlast]={opacity:1,xLoc:n.xLoc-32,yLoc:n.yLoc-32};Ships.currentBlast++};
//# sourceMappingURL=playership.min.js.map
